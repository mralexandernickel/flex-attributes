class ScrollShrinkService {

  private headerEl: HTMLElement;
  private contentEl: Document = document;
  private scrollCheckInterval: number = 100;
  private showShadowOffset: number = 20;
  private didScroll: Boolean = false;
  private classShowShadow: string = 'show-shadow';

  constructor() {
    this.headerEl = <HTMLElement>document.querySelector('header.gh-boilerplate');
    this.init();
  }

  private init() {
    if (document.body.scrollTop > this.showShadowOffset) {
      this.headerEl.classList.add(this.classShowShadow);
    }
    this.contentEl.addEventListener('scroll', () => {
        this.didScroll = true;
    });
    setInterval(() => {
      if (this.didScroll) {
        this.didScroll = false;

        if (document.body.scrollTop > this.showShadowOffset) {
          this.headerEl.classList.add(this.classShowShadow);
        } else {
          this.headerEl.classList.remove(this.classShowShadow);
        }

        /*
        let newToolbarHeight;
        if (this.toolbarHeight - (document.body.scrollTop / this.heightFactor) > this.toolbarMinHeight) {
          newToolbarHeight = this.toolbarHeight - (document.body.scrollTop / this.heightFactor);
        } else {
          newToolbarHeight = this.toolbarMinHeight;
        }
        if (parseFloat(this.headerEl.style.height) != newToolbarHeight) {
          this.headerEl.style.height = `${newToolbarHeight}px`;
        }
        */

      }
    }, this.scrollCheckInterval);
  }
}

export default ScrollShrinkService;